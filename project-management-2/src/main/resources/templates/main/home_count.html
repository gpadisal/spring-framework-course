<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="layouts :: header"></head>

    <body>
        <nav th:replace="layouts :: prjNavBar"></nav>

        <div class="container">
            <h3>Main Dashboard</h3>
            
            <a th:text="${projectVersion}"> </a>
            <hr />

            <h4>Project stages</h4>

            <div class="row">
                <div class="col-md-6">
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                         <tr>
				  		      <th scope="col">Project Name</th>
						      <th scope="col">Project Stage</th>
                          </tr>
                        </thead>
                        <tbody>
				   		    <tr th:each="project: ${projects}">
						      <td th:text="${project.name}"/>
						      <td th:text="${project.stage}"/>
						    </tr>
						</tbody>
                    </table>
                </div>

                <div class="col-md-4">
                    <canvas id="myPieChart" height="50" width="50"></canvas>
                    
                    <script>
                    	// remember 2 sq brackets to load the model attributes in javascript
                    	// [[  ${modelAttribute}  ]]
                    	var chartData = "[[${projectStatusCnt}]]";
                    </script>
                </div>
            </div>
        </div>
        <div class="container">
            <h4>Employee Project Count</h4>

            <div class="row">
                <div class="col-md-6">
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">First Name</th>
                                <th scope="col">Last Name</th>
                                <th scope="col">Employee Projects</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="empPrj: ${employeeProjects}">
                                <td th:text="${empPrj.firstName}" />
                                <td th:text="${empPrj.lastName}" />
                                <td th:text="${empPrj.projectCount}" />
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Optional JavaScript; choose one of the two! -->

        <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
        <!--  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
 -->
        <!-- Option 2: jQuery, Popper.js, and Bootstrap JS
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    -->

        <script type="text/javascript" th:src="@{/js/myChart.js}"></script>
    </body>
</html>